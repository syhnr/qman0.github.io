<html>
	<head>
		<title>Список игроков</title>
		<link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
		<link rel="stylesheet" href="../css/main.css"/>
		<script type="text/javascript" src="../js/sortabletable.js"></script>
		<script type="text/javascript" src="../js/jquery-3.4.1.min.js"></script>
	</head>
	<body>
		<div class="header">
			<a class="header-links" href="../rules">Правила</a>
			<a class="header-links" href="../commands">Команды</a>
			<a class="header-links" href="../dynmap">Динамическая карта</a>
			<a class="header-links" href="#">Список игроков</a>
			<a class="header-links" href="../banned">Заблокированные игроки</a>
		</div>
		<h1>Список всех игроков в текущем белом списке</h1>
		
		<div id="showData"></div>
		
		<table id="table">
			<tr class="border_bottom">
				<th onclick="sortTable(0)">Роль</th>
				<th onclick="sortTable(1)">Внутриигровой ник</th>
				<th onclick="sortTable(2)">Discord</th>
				<th onclick="sortTable(3)">Дата добавления</th>
				</tr>
			<tr class="border_bottom">
				<td class="admin"><span id="А">Администратор</span></td>
				<td>_QMan</td>
				<td>QMan#8191</td>
				<td>11.12.2019</td>
			</tr>
			<tr class="border_bottom">
				<td class="mod"><span id="М">Модератор</span></td>
				<td class="angie">CarelessAngie</td>
				<td>Angie Aome#4705</td>
				<td>14.12.2019</td>
			</tr>
			<tr class="border_bottom">
				<td>Игрок</td>
				<td>pruf</td>
				<td>pruf#8502</td>
				<td>14.12.2019</td>
			</tr>
			<tr class="border_bottom">
				<td>Игрок</td>
				<td>SYHNR</td>
				<td>YHN#7969</td>
				<td>14.12.2019</td>
			</tr>
			<tr class="border_bottom">
				<td>Игрок</td>
				<td>CESAAAR</td>
				<td>Иностранный шпион Миль Папс#6863</td>
				<td>14.12.2019</td>
			</tr>
			<tr class="border_bottom">
				<td>Игрок</td>
				<td>papap1</td>
				<td>f0r4g3m0n#3714</td>
				<td>14.12.2019</td>
			</tr>
			<tr class="border_bottom">
				<td>Игрок</td>
				<td>Schtil</td>
				<td>Schtil#9230</td>
				<td>14.12.2019</td>
			</tr>
			<tr class="border_bottom">
				<td>Игрок</td>
				<td>Jusk</td>
				<td>Сайтама | One-Punch Man#4504</td>
				<td>14.12.2019</td>
			</tr>
			<tr class="border_bottom">
				<td>Игрок</td>
				<td>Liinkarto</td>
				<td>Liinkarto#6358</td>
				<td>14.12.2019</td>
			</tr>
			<tr class="border_bottom">
				<td>Игрок</td>
				<td>Vanlige</td>
				<td>renicodav#2061</td>
				<td>03.01.2020</td>
			</tr>
			<tr class="border_bottom">
				<td class="mod"><span id="М">Модератор</span></td>
				<td>ImrHeadCrabI</td>
				<td>HeadCrab#3314</td>
				<td>16.12.2019</td>
			</tr>
			<tr class="border_bottom">
				<td>Игрок</td>
				<td>fredyfos</td>
				<td>fredy#5549</td>
				<td>18.12.2019</td>
			</tr>
			<tr class="border_bottom">
				<td>Игрок</td>
				<td>n_altovsky</td>
				<td>Nick Altovsky#2956</td>
				<td>29.12.2019</td>
			</tr>
			<tr class="border_bottom">
				<td>Игрок</td>
				<td>Psychoman</td>
				<td>Psychoman#2404</td>
				<td>01.01.2020</td>
			</tr>
			<tr class="border_bottom">
				<td>Игрок</td>
				<td>ArtemM</td>
				<td>Artem M#2910</td>
				<td>02.01.2020</td>
			</tr>
			<tr class="border_bottom">
				<td>Игрок</td>
				<td>BankRot</td>
				<td>BankRot(ru)#3955</td>
				<td>02.01.2020</td>
			</tr>
			<tr class="border_bottom">
				<td>Игрок</td>
				<td>Rad1ubit</td>
				<td>Rad1ubit#0211</td>
				<td>03.01.2020</td>
			</tr>
			<tr class="border_bottom">
				<td>Игрок</td>
				<td>eltyan</td>
				<td>Акридерм#6054</td>
				<td>05.01.2020</td>
			</tr>
			<tr class="border_bottom">
				<td>Игрок</td>
				<td>FAILD330</td>
				<td>Faild333#2799</td>
				<td>08.01.2020</td>
			</tr>
			<tr class="border_bottom">
				<td>Игрок</td>
				<td>_DAD42_</td>
				<td>DAD42#6710</td>
				<td>08.01.2020</td>
			</tr>
		</table>
	</body>
	
	<script>
    $(document).ready(function () {
        $.getJSON("../json/whitelist.json", function (data) {

            var arrItems = [];      // THE ARRAY TO STORE JSON ITEMS.
            $.each(data, function (index, value) {
                arrItems.push(value);       // PUSH THE VALUES INSIDE THE ARRAY.
            });

            // EXTRACT VALUE FOR TABLE HEADER.
            var col = [];
            for (var i = 0; i < arrItems.length; i++) {
                for (var key in arrItems[i]) {
                    if (col.indexOf(key) === -1) {
                        col.push(key);
                    }
                }
            }

            // CREATE DYNAMIC TABLE.
            var table = document.createElement("table");

            // CREATE HTML TABLE HEADER ROW USING THE EXTRACTED HEADERS ABOVE.

            var tr = table.insertRow(-1);                   // TABLE ROW.

            for (var i = 0; i < col.length; i++) {
                var th = document.createElement("th").onclick = function() { sortTable(3); };      // TABLE HEADER.
                th.innerHTML = col[i];
                tr.appendChild(th);
            }

            // ADD JSON DATA TO THE TABLE AS ROWS.
            for (var i = 0; i < arrItems.length; i++) {

                tr = table.insertRow(-1);

                for (var j = 0; j < col.length; j++) {
                    var tabCell = tr.insertCell(-1);
                    tabCell.innerHTML = arrItems[i][col[j]];
                }
            }

            // FINALLY ADD THE NEWLY CREATED TABLE WITH JSON DATA TO A CONTAINER.
            var divContainer = document.getElementById("showData");
            divContainer.innerHTML = "";
            divContainer.appendChild(table);
        });
    });
</script>
	
</html>